# Test assignment - Avito backend internship

## Как запустить? 
* Клонируете репозиторий
* В файл `secrets/.env ` сохраняете секреты для PostgreSQL, JWT и прочие
* Запускаете `make all`

## Что получилось:
* Сервис реализован в концепции микросервисной архитектуры
* При создании сервера инициализируются все микросервисы (контейнеры)
* Контейнеры есть нескольких уровней - 
  * `handlers` - верхний уровень - хранит бизнес логику
  * `services` - средний уровень - хранит логику отдельных сервисов
  * `repositories` - нижний уровень - хранит логику общения с хранилищами
* Иерархия контейнеров - дерево
* База данных - PostgreSQL, реализован механизм миграций
* Поддержан весь API, улучшена работа с хранением мерча, присутсвует логика работы с JWT токенами

## TODO: 
* Написано очень мало тестов, решил, что лучше сделаю грамотную архитектуру и полностью поддержу выданный API
* Нет грамотного логгера (не поддержаны INFO сообщения)
* Проверку токена можно вынести Middleware
* Хранить информацию о покупках можно в отдельном Key-Value хранилище, например Redis
* Уровни доступа в базе данных не поддержаны
* Роли не поддержаны (ручки `/admin/` может дергать любой авторизованый пользователь)
* Не проведено нагрузочное тестирование
* Не поддержан деплой
* Инициализацию контейнеров можно проводить функцией `NewContainer()`, но в таком случае не понятно как красиво завершать работу контейнеров - быстрого решения не пришло в голову, оставил как есть (это помогло бы не дублировать логику создания подклбчения в контейнере `Connection`)
* Реализация разделения сущностей слегка хромает - стоит пересмотерть сущности уровня `repositories`
